{% extends "base.html" %}

{% block title %}Configuraci√≥n - Admin{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin_modules.css') }}">
{% endblock %}

{% block content %}
<div class="admin-module-container">
    <!-- Header -->
    <div class="module-header">
        <div class="module-title">
            <h1>‚öôÔ∏è Configuraci√≥n del Sistema</h1>
            <p>Configura los par√°metros del sistema</p>
        </div>
        <div class="module-actions">
            <a href="/admin" class="btn-back">‚Üê Volver al Dashboard</a>
        </div>
    </div>

    <!-- Configuraci√≥n en tabs -->
    <div class="config-tabs">
        <div class="tab-buttons">
            <button class="tab-button active" onclick="openTab('general')">General</button>
            <button class="tab-button" onclick="openTab('seguridad')">Seguridad</button>
            <button class="tab-button" onclick="openTab('xmpp')">XMPP</button>
            <button class="tab-button" onclick="openTab('base-datos')">Base de Datos</button>
        </div>

        <div class="tab-content">
            <!-- Tab General -->
            <div id="general" class="tab-pane active">
                <form class="config-form">
                    <div class="form-group">
                        <label for="nombre_sistema">Nombre del Sistema</label>
                        <input type="text" id="nombre_sistema" value="Sistema de An√°lisis de Red Universitaria" class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="url_sistema">URL del Sistema</label>
                        <input type="url" id="url_sistema" value="http://localhost:5000" class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="timezone">Zona Horaria</label>
                        <select id="timezone" class="form-control">
                            <option value="America/Bogota" selected>Bogot√° (UTC-5)</option>
                            <option value="UTC">UTC</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="idioma">Idioma</label>
                        <select id="idioma" class="form-control">
                            <option value="es" selected>Espa√±ol</option>
                            <option value="en">English</option>
                        </select>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-primary" onclick="guardarConfiguracion('general')">
                            üíæ Guardar Configuraci√≥n
                        </button>
                    </div>
                </form>
            </div>

            <!-- Tab Seguridad -->
            <div id="seguridad" class="tab-pane">
                <form class="config-form">
                    <div class="form-group">
                        <label for="longitud_password">Longitud M√≠nima de Contrase√±a</label>
                        <input type="number" id="longitud_password" value="6" min="4" max="20" class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="intentos_login">Intentos de Login Permitidos</label>
                        <input type="number" id="intentos_login" value="3" min="1" max="10" class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="session_timeout">Tiempo de Sesi√≥n (minutos)</label>
                        <input type="number" id="session_timeout" value="30" min="5" max="480" class="form-control">
                    </div>

                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="ssl_required" checked>
                        <label for="ssl_required">Requerir conexi√≥n SSL/TLS</label>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-primary" onclick="guardarConfiguracion('seguridad')">
                            üíæ Guardar Configuraci√≥n
                        </button>
                    </div>
                </form>
            </div>

            <!-- Tab XMPP -->
            <div id="xmpp" class="tab-pane">
                <form class="config-form">
                    <div class="form-group">
                        <label for="xmpp_server">Servidor XMPP</label>
                        <input type="text" id="xmpp_server" value="xmpp.ucundinamarca.edu.co" class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="xmpp_port">Puerto</label>
                        <input type="number" id="xmpp_port" value="5222" class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="xmpp_domain">Dominio</label>
                        <input type="text" id="xmpp_domain" value="ucundinamarca.edu.co" class="form-control">
                    </div>

                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="xmpp_tls" checked>
                        <label for="xmpp_tls">Usar TLS</label>
                    </div>

                    <div class="form-group">
                        <label>Estado de Conexi√≥n</label>
                        <div class="status-indicator connected">
                            üü¢ Conectado al servidor XMPP
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-primary" onclick="guardarConfiguracion('xmpp')">
                            üíæ Guardar Configuraci√≥n
                        </button>
                        <button type="button" class="btn-secondary" onclick="probarConexionXMPP()">
                            üß™ Probar Conexi√≥n
                        </button>
                    </div>
                </form>
            </div>

            <!-- Tab Base de Datos -->
            <div id="base-datos" class="tab-pane">
                <form class="config-form">
                    <div class="form-group">
                        <label for="db_host">Host de Base de Datos</label>
                        <input type="text" id="db_host" value="localhost" class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="db_name">Nombre de Base de Datos</label>
                        <input type="text" id="db_name" value="comunicaciondatos" class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="db_user">Usuario</label>
                        <input type="text" id="db_user" value="root" class="form-control">
                    </div>

                    <div class="form-group">
                        <label for="db_status">Estado de Conexi√≥n</label>
                        <div class="status-indicator connected">
                            üü¢ Conectado a la base de datos
                        </div>
                    </div>

                    <div class="database-actions">
                        <h4>Acciones de Base de Datos</h4>
                        <div class="action-buttons-grid">
                            <button type="button" class="btn-action btn-info" onclick="respaldarBD()">
                                üíæ Respaldar BD
                            </button>
                            <button type="button" class="btn-action btn-warning" onclick="optimizarBD()">
                                üöÄ Optimizar BD
                            </button>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-primary" onclick="guardarConfiguracion('base-datos')">
                            üíæ Guardar Configuraci√≥n
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
function openTab(tabName) {
    // Ocultar todos los tabs
    document.querySelectorAll('.tab-pane').forEach(tab => {
        tab.classList.remove('active');
    });
    document.querySelectorAll('.tab-button').forEach(button => {
        button.classList.remove('active');
    });

    // Mostrar el tab seleccionado
    document.getElementById(tabName).classList.add('active');
    event.currentTarget.classList.add('active');
}

function guardarConfiguracion(seccion) {
    alert('Guardando configuraci√≥n de ' + seccion + '... - En desarrollo');
}

function probarConexionXMPP() {
    alert('Probando conexi√≥n XMPP... - En desarrollo');
}

function respaldarBD() {
    alert('Iniciando respaldo de base de datos... - En desarrollo');
}

function optimizarBD() {
    alert('Optimizando base de datos... - En desarrollo');
}
</script>
{% endblock %}